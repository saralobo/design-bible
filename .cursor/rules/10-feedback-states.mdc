---
alwaysApply: true
---

# Feedback e Estados — Comunicação Sistema ↔ Usuário

> Todo clique, toda ação, toda espera precisa de feedback visual.
> Silêncio do sistema = insegurança do usuário.

---

## PRINCÍPIO FUNDAMENTAL

> **O sistema NUNCA fica em silêncio.** Cada ação do usuário recebe resposta visual em < 100ms.
> Se algo demora > 400ms, mostre loading. Se algo deu certo, celebre. Se deu errado, explique.

---

## ESTADOS DE COMPONENTES

Todo componente interativo DEVE ter estes estados visuais:

| Estado | Trigger | Visual | Duração |
|---|---|---|---|
| **Default** | Nenhum | Normal | — |
| **Hover** | Mouse over (desktop) | Bg levemente mais escuro, cursor pointer | Instant |
| **Pressed/Active** | Touch/Click down | Bg mais escuro, scale 0.97-0.98 | < 100ms |
| **Focused** | Tab/Keyboard | Ring 2px accent com 2px offset | Instant |
| **Disabled** | isDisabled=true | Opacity 40%, cursor not-allowed | — |
| **Loading** | Ação em progresso | Spinner/skeleton, mantém tamanho | Até completar |
| **Error** | Validação falhou | Borda vermelha + ícone + msg | Até corrigir |
| **Success** | Ação concluída | Check verde temporário | 2-3s |
| **Selected** | Item selecionado | Bg accent 8%, ícone check | Até desselecionar |

---

## FEEDBACK POR TIPO DE AÇÃO

### 1. Ação Instantânea (< 300ms)
**Exemplos**: Toggle, checkbox, tab switch, like
- **Feedback**: Mudança visual imediata (cor, ícone, estado)
- **Não precisa**: Loading, toast, ou mensagem

### 2. Ação Rápida (300ms — 2s)
**Exemplos**: Salvar rascunho, enviar mensagem curta
- **Feedback**: Spinner inline no botão OU skeleton
- **Ao completar**: Check momentâneo (2s) ou toast sutil

### 3. Ação Demorada (2s — 10s)
**Exemplos**: Upload de arquivo, processamento de pagamento
- **Feedback**: Progress bar com percentual OU spinner com texto descritivo
- **Texto**: "Processando pagamento..." (descreva O QUE está acontecendo)
- **Ao completar**: Tela de sucesso dedicada

### 4. Ação Muito Longa (> 10s)
**Exemplos**: Processamento em background, geração de relatório
- **Feedback**: Progress bar + tempo estimado + opção de "Notificar quando pronto"
- **Permita**: Que o usuário faça outras coisas enquanto espera

---

## TOASTS E SNACKBARS

### Anatomia:
```
┌──────────────────────────────────────┐
│  ✓  Mensagem de sucesso    [ Desfazer ] │
└──────────────────────────────────────┘
```

### Regras:
| Propriedade | Valor |
|---|---|
| Posição | Bottom (acima do bottom nav), 16px margin |
| Largura | Full-width - 32px (16px cada lado) |
| Altura | 48-56px |
| Border-radius | 8-12px |
| Duração | 3-5 segundos (auto-dismiss) |
| Max chars | ~60 caracteres (1 linha) |
| Ação | Máximo 1 botão (ex: "Desfazer") |
| Cor success | Background positive com texto branco |
| Cor error | Background negative com texto branco |
| Cor info | Background neutral-800 com texto branco |

### Tipos de Toast:
| Tipo | Ícone | Cor | Uso |
|---|---|---|---|
| Success | ✓ check | Green | Ação completada |
| Error | ✕ cross | Red | Ação falhou |
| Warning | ⚠ triangle | Yellow/Orange | Atenção necessária |
| Info | ℹ circle | Blue/Neutral | Informação |

### ANTI-PADRÕES:
- ❌ Toast sobrepondo CTA ou bottom nav
- ❌ Toast que não some (bloqueia a tela)
- ❌ Mais de 1 toast ao mesmo tempo (stack cuidadosamente)
- ❌ Toast para erro crítico (use modal ou inline error)

---

## BANNERS E ALERTS

### Inline Banner (dentro da tela):
```
┌──────────────────────────────────────┐
│  ⚠️  Sua assinatura expira em 3 dias  │
│      Renovar agora →                  │
│                                  × │
└──────────────────────────────────────┘
```

### Regras:
- Posição: Topo da tela, abaixo do header
- Dismissable: X para fechar (se não-crítico)
- Non-dismissable: Erros críticos (conta bloqueada, etc.)
- Ação: Link ou botão inline
- Cores: Mesmo padrão semântico (success/error/warning/info)

---

## MODAIS DE CONFIRMAÇÃO

### Quando usar:
- Ações destrutivas (deletar, sair sem salvar)
- Ações irreversíveis (enviar pagamento)
- Ações com consequências significativas

### Anatomia:
```
┌──────────────────────────────────────┐
│                                      │
│  ⚠️ Confirmar exclusão?              │  ← Ícone + Título
│                                      │
│  Esta ação não pode ser desfeita.    │  ← Descrição clara
│  Todos os dados serão perdidos       │
│  permanentemente.                    │
│                                      │
│     [ Cancelar ]    [ Excluir ]      │  ← Ghost + Destrutivo (vermelho)
│                                      │
└──────────────────────────────────────┘
```

### Regras:
- Overlay: 50-60% opacity black
- Padding: 24px
- Border-radius: 16-20px
- Título: Pergunta clara ("Excluir este item?")
- Descrição: Consequência ("Não pode ser desfeito")
- Botão cancel: Ghost/secondary (esquerda)
- Botão confirm destrutivo: Red filled (direita)
- Botão confirm normal: Accent filled (direita)
- NUNCA: "Sim" / "Não" como labels (seja específico)

---

## TELAS DE SUCESSO

### A regra do Peak-End (Pico-Fim):
> A tela de sucesso é o ÚLTIMO ponto do fluxo. O usuário LEMBRA dela.
> Invista design, emoção e qualidade aqui.

### Anatomia:
```
┌──────────────────────────────────────┐
│                                      │
│                                      │
│            ✓ (animado)               │  ← Check com animação (scale + fade)
│                                      │
│       PIX Enviado!                   │  ← heading-xl, positive ou accent
│                                      │
│       R$ 150,00                      │  ← display-lg, bold
│       para João Silva                │  ← body-lg, neutral-600
│                                      │
│                                      │
│  ┌────────────────────────────────┐  │
│  │  Detalhes da transação...      │  │  ← Card com detalhes (opcional)
│  └────────────────────────────────┘  │
│                                      │
│  [ Compartilhar ]  [ Voltar ]        │  ← Ações pós-sucesso
│                                      │
└──────────────────────────────────────┘
```

### Regras:
- Check animado: Scale de 0 → 1.2 → 1.0, 400-600ms
- Confetti/Celebration: Opcional para marcos grandes (primeira compra, meta atingida)
- Informação resumida: Mostre o essencial (valor, destinatário)
- CTAs pós-sucesso: "Compartilhar", "Ver comprovante", "Voltar ao início"
- Background: Pode ter cor accent leve ou manter o padrão da tela

---

## TELAS DE ERRO

### Erro Recuperável:
```
┌──────────────────────────────────────┐
│                                      │
│         [Ilustração de erro]         │
│                                      │
│    Falha na conexão                  │  ← heading-lg
│    Verifique sua internet            │  ← body-lg, neutral-600
│    e tente novamente.                │
│                                      │
│    [ Tentar novamente ]              │  ← CTA primário
│                                      │
└──────────────────────────────────────┘
```

### Erro Irrecuperável:
```
┌──────────────────────────────────────┐
│                                      │
│         [Ilustração de erro]         │
│                                      │
│    Pagamento recusado                │  ← heading-lg, negative
│    Seu banco recusou a transação.    │  ← body-lg
│    Entre em contato com seu banco    │
│    ou tente outro método.            │
│                                      │
│    [ Tentar outro método ]           │  ← CTA alternativo
│    [ Voltar ao início ]              │  ← Link secundário
│                                      │
└──────────────────────────────────────┘
```

---

## LOADING PATTERNS

### Spinner:
- Uso: Ações rápidas, botões, inline loading
- Tamanho: 20px (botão), 24px (inline), 40px (full page)
- Cor: Accent ou white (se sobre accent bg)
- NUNCA: Spinner sozinho numa tela sem texto

### Skeleton / Shimmer:
- Uso: Loading de conteúdo (listas, cards, páginas)
- Formato: Espelha o layout real do conteúdo
- Animação: Shimmer left → right, 1.5-2s loop
- PREFERÍVEL ao spinner para loading de páginas

### Progress Bar:
- Uso: Uploads, downloads, processos com progresso conhecido
- Altura: 4-8px
- Border-radius: height/2 (pill)
- Cor: Accent (progresso) sobre neutral-200 (track)
- Com percentual se > 5 segundos

---

## CHECKLIST DE FEEDBACK

- [ ] Todo botão tem visual feedback ao pressionar (< 100ms)?
- [ ] Loading aparece em < 400ms para ações demoradas?
- [ ] Toasts estão posicionados acima do bottom nav?
- [ ] Toasts auto-dismiss em 3-5 segundos?
- [ ] Ações destrutivas têm confirmação modal?
- [ ] Tela de sucesso tem animação/emoção?
- [ ] Telas de erro oferecem ação corretiva?
- [ ] Skeleton espelha o layout real do conteúdo?
- [ ] Disabled states mantêm o tamanho original?
